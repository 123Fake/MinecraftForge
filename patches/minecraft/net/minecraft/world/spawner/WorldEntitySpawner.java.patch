--- a/net/minecraft/world/spawner/WorldEntitySpawner.java
+++ b/net/minecraft/world/spawner/WorldEntitySpawner.java
@@ -83,7 +83,7 @@
          }
 
          final Entity entity_f = entity;
-         EntityClassification entityclassification = entity.func_200600_R().func_220339_d();
+         EntityClassification entityclassification = entity.getClassification(true);
          if (entityclassification != EntityClassification.MISC) {
             BlockPos blockpos = entity.func_233580_cy_();
             long i = ChunkPos.func_77272_a(blockpos.func_177958_n() >> 4, blockpos.func_177952_p() >> 4);
@@ -294,6 +294,13 @@
       if (p_209382_0_ == EntitySpawnPlacementRegistry.PlacementType.NO_RESTRICTIONS) {
          return true;
       } else if (p_209382_3_ != null && p_209382_1_.func_175723_af().func_177746_a(p_209382_2_)) {
+         return p_209382_0_.canSpawnAt(p_209382_1_, p_209382_2_, p_209382_3_);
+      }
+      return false;
+   }
+
+   public static boolean canSpawnAtBody(EntitySpawnPlacementRegistry.PlacementType p_209382_0_, IWorldReader p_209382_1_, BlockPos p_209382_2_, @Nullable EntityType<?> p_209382_3_) {
+      {
          BlockState blockstate = p_209382_1_.func_180495_p(p_209382_2_);
          FluidState fluidstate = p_209382_1_.func_204610_c(p_209382_2_);
          BlockPos blockpos = p_209382_2_.func_177984_a();
@@ -312,8 +319,6 @@
                return func_234968_a_(p_209382_1_, p_209382_2_, blockstate, fluidstate, p_209382_3_) && func_234968_a_(p_209382_1_, blockpos, p_209382_1_.func_180495_p(blockpos), p_209382_1_.func_204610_c(blockpos), p_209382_3_);
             }
          }
-      } else {
-         return false;
       }
    }
 
@@ -356,6 +361,7 @@
                      entity.func_70012_b(d0, (double)blockpos.func_177956_o(), d1, p_77191_4_.nextFloat() * 360.0F, 0.0F);
                      if (entity instanceof MobEntity) {
                         MobEntity mobentity = (MobEntity)entity;
+                        if (net.minecraftforge.common.ForgeHooks.canEntitySpawn(mobentity, p_77191_0_, d0, blockpos.func_177956_o(), d1, null, SpawnReason.CHUNK_GENERATION) == -1) continue;
                         if (mobentity.func_213380_a(p_77191_0_, SpawnReason.CHUNK_GENERATION) && mobentity.func_205019_a(p_77191_0_)) {
                            ilivingentitydata = mobentity.func_213386_a(p_77191_0_, p_77191_0_.func_175649_E(mobentity.func_233580_cy_()), SpawnReason.CHUNK_GENERATION, ilivingentitydata, (CompoundNBT)null);
                            p_77191_0_.func_217376_c(mobentity);
